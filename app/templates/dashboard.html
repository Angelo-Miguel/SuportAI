<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<link
			rel="shortcut icon"
			href="../static/img/icon.ico"
			type="image/x-icon"
		/>

		<title>{{session['user'].name}}</title>

		<link rel="stylesheet" href="../static/css/reset.css" />
		<link rel="stylesheet" href="../static/css/style.css" />
		<link rel="stylesheet" href="../static/css/dashboard.css" />

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
			rel="stylesheet"
		/>
	</head>
	<body>
		<div class="background opacity"></div>
		<div id="menu-bar">
			<span id="brand">
				<img src="../static/img/logo.png" alt="Logo" id="logo" />
				<span id="brand-name">SUPORT AI</span>
			</span>
			<div id="user-actions">
				<input type="button" class="button new-request" value="Novo Chamado" />
				<span id="user-name">
					<span class="jinja">{{session['user'].name}}</span>
				</span>
				<!-- DEBUG: tirar depois -->
				<a href="\logout">Sair</a>
			</div>
		</div>
		<div id="content">
			<div id="table-tickets">
				<table>
					<thead>
						<tr>
							<th id="num-request">Nº Chamado</th>
							<th id="tittle">Título</th>
							<th id="category">Categoria</th>
							<th id="status">Status</th>
							<th id="action">Ação</th>
							<th id="date">Data</th>
						</tr>
					</thead>

					<tbody class="tbody">
						<span class="jinja"> {% for table_item in tickets%} </span>
						<tr>
							<td><span class="jinja">{{table_item['ticket_id']}}</span></td>
							<td><span class="jinja">{{table_item['title']}}</span></td>
							<td><span class="jinja">{{table_item['category']}}</span></td>
							<td class="{{table_item['status']}}">
								<span class="jinja">
									{% if table_item['status'] == 'open' %} Aberto {% elif
									table_item['status'] == 'closed' %} Fechado {% elif
									table_item['status'] == 'in-progress' %} Em Andamento {% else
									%} {{table_item['status']}} {% endif %}
								</span>
							</td>
							<td>
								<a href="">
									<span class="jinja">
										{% if ((table_item['status'] == 'open') or
										(table_item['status'] == 'in-progress')) %} Abrir Chamado {%
										elif table_item['status'] == 'closed' %} Reabrir Chamado {%
										else %} {{table_item['status']}} {% endif %}
									</span>
								</a>
							</td>
							<td>
								<span class="jinja"
									>{{table_item['created_at'].strftime('%d/%m/%y')}}</span
								>
							</td>
						</tr>
						<span class="jinja"> {% endfor %} </span>
					</tbody>
				</table>
			</div>
		</div>
		<script defer src="../static/js/scripts.js"></script>
	</body>
</html>
